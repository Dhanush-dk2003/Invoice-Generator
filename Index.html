<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invoice Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      color: #333;
    }
    .invoice-box {
      max-width: 800px;
      margin: auto;
      border: 1px solid #eee;
      padding: 20px;
      overflow-x: auto;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      flex-wrap: wrap;
    }
    .header img {
      max-width: 180px;
    }
    .company-details {
      margin-top: 25px;
      margin-left: 10px;
      font-size: 12px;
      line-height: 1.4;
    }
    .company-details h4 {
      margin: 0;
      font-size: 12px;
    }
    
    .invoice-fields {
  display: flex;
  flex-direction: column; /* stack vertically */
  align-items: flex-end;   /* align inputs to the same end */
  margin-top: 60px;
}
.invoice-fields h3 {
      
      padding-right: 40px;
    }
.invoice-fields label {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  width: 100%;
}

    .invoice-fields input {
      border: none;
      background: transparent;
      font-size: 14px;
      width: 140px;
      border-bottom: 1px solid #ccc;
      padding: 2px;
    }
    textarea {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      resize: vertical;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      table-layout: fixed;
      word-wrap: break-word;
    }
    table, th, td {
      border: 1px solid #6d6a6a;
    }
    th {
      background-color: #cecece;
      padding: 8px;
      
    }
    th, td {
      text-align: left;
      padding: 6px;
    }
    th:nth-child(2), td:nth-child(2) {
      width: 30%;
    }
    .totals {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
    }
    .totals-right {
      text-align: right;
    }
   table th:nth-child(1), table td:nth-child(1) { width: 8%; }
table th:nth-child(2), table td:nth-child(2) { width: 38%; }
table th:nth-child(3), table td:nth-child(3) { width: 15%; }
table th:nth-child(4), table td:nth-child(4) { width: 13%; }
table th:nth-child(5), table td:nth-child(5) { width: 13%; }
table th:nth-child(6), table td:nth-child(6) { width: 8%; }
table th:nth-child(7), table td:nth-child(7) { width: 13%; }
table td input[type="text"],
table td input[type="number"] {
  width: 100%;
  box-sizing: border-box;
  padding: 4px; /* adjust if needed */
}


    .amount-in-words {
      border-top: 1px solid #ddd;
      margin-top: 10px;
      padding-top: 10px;
      font-style: italic;
    }
    .signatory-title {
      margin-top: 50px;
      text-align: right;
    }
    .signatory-authority {
      text-align: right;
      margin-top: 100px;
    }
    .footer {
      margin-top: 30px;
      text-align: center;
      font-size: 12px;
      
    }
    hr {
      margin: 20px 0;
    }
    .btn-add {
      margin-top: 10px;
      float: right;
    }
    .btn-download {
      margin-top: 20px;
      float: right;
    }
  </style>
</head>
<body>
  <div class="invoice-box" id="invoice">
    <div class="header">
      <div>
        <img src="./Assets/Sellerfly.png" alt="Logo" />
        <div class="company-details">
          <h4>SKSY SELLERFLY ONLINE SOLUTIONS LLP</h4>
          Sf.No.434, Shedukarar Street, Ellapalayam,<br>
          Coimbatore, Mettupalayam,<br>
          Mettupalayam - 641697<br>
          TAMILNADU, INDIA<br>
          Email: senthil.sellerfly@gmail.com<br>
          Mobile: 6381780309<br>
          GSTIN: 33AFNFS0333L1ZV
        </div>
      </div>
      <div>
        
        <div class="invoice-fields">
          <h3 id="invoiceTitle">INVOICE</h3>
          <label>Number: <input type="text" id="invoiceNumber"></label>
          <label>Date: <input type="date" id="invoiceDate"></label>
          <label>Due Date: <input type="date" id="invoiceDueDate"></label>
        </div>
      </div>
    </div>

    <hr>

    <div style="display: flex; gap: 20px;">
      <div style="flex: 1;">
        <h3>Customer</h3>
        <textarea rows="6" placeholder="Customer Address"></textarea>
      </div>
      <div style="flex: 1;">
        <h3>Billing Address</h3>
        <textarea rows="6" placeholder="Billing Address"></textarea>
      </div>
      <div style="flex: 1;">
        <h3>Shipping Address</h3>
        <textarea rows="6" placeholder="Shipping Address"></textarea>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>S.No</th>
          <th>Description</th>
          <th>Rate</th>
          <th>Quantity</th>
          <th>Taxable</th>
          <th>GST 5%</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td><input type="text" placeholder="Description" oninput="calculate()"></td>
          <td><input type="number" placeholder="Rate" oninput="calculate()"></td>
          <td><input type="number" placeholder="Qty" oninput="calculate()"></td>
          <td class="taxable">0</td>
          <td class="gst">0</td>
          <td class="total">0</td>
        </tr>
      </tbody>
    </table>
    <button class="btn-add" onclick="addRow()">+ Add Row</button>

    <div class="totals">
      <div>
        <p><strong>Bank Name:</strong> SOUTH INDIAN BANK</p>
        <p><strong>Account Name:</strong> SKSY SELLERFLY ONLINE SOLUTIONS LLP</p>
        <p><strong>Account Number:</strong> 0753073000000635</p>
        <p><strong>IFSC Code:</strong> SIBL0000753</p>
      </div>
      <div class="totals-right">
        <p>Taxable INR 0.00</p>
        <p>IGST INR 0.00</p>
        <p><strong>Total INR 0.00</strong></p>
      </div>
    </div>

    <div class="amount-in-words">
      Total in Words: 
    </div>

    <div class="signatory">
      <p class="signatory-title">For SKSY SELLERFLY ONLINE SOLUTIONS LLP</p>
      <p class="signatory-authority">Authorised Signatory</p>
    </div>

    <hr>
    <div class="footer">
      Thank you for your business.
    </div>
    <hr>

    <button class="btn-download" onclick="downloadPDF()">Download PDF</button>
  </div>

  <!-- html2pdf script CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script>
    window.onload = function () {
      const today = new Date();
      const number = `SKSY${today.getFullYear()}${String(today.getMonth() + 1).padStart(2, '0')}${String(today.getDate()).padStart(2, '0')}`;
      document.getElementById('invoiceNumber').value = number;
    };

    function addRow() {
      const tbody = document.querySelector("table tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${tbody.children.length + 1}</td>
        <td><input type="text" placeholder="Description" oninput="calculate()"></td>
        <td><input type="number" placeholder="Rate" oninput="calculate()"></td>
        <td><input type="number" placeholder="Qty" oninput="calculate()"></td>
        <td class="taxable">0</td>
        <td class="gst">0</td>
        <td class="total">0</td>
      `;
      tbody.appendChild(row);
    }

    function calculate() {
      let taxableTotal = 0;
      let gstTotal = 0;
      let grandTotal = 0;

      document.querySelectorAll("table tbody tr").forEach(row => {
        const rate = parseFloat(row.querySelector("td:nth-child(3) input")?.value) || 0;
        const qty = parseFloat(row.querySelector("td:nth-child(4) input")?.value) || 0;
        const taxable = rate * qty;
        const gst = taxable * 0.05;
        const total = taxable + gst;

        row.querySelector(".taxable").innerText = taxable.toFixed(2);
        row.querySelector(".gst").innerText = gst.toFixed(2);
        row.querySelector(".total").innerText = total.toFixed(2);

        taxableTotal += taxable;
        gstTotal += gst;
        grandTotal += total;
      });

      document.querySelector(".totals-right").innerHTML = `
        <p>Taxable INR ${taxableTotal.toFixed(2)}</p>
        <p>IGST INR ${gstTotal.toFixed(2)}</p>
        <p><strong>Total INR ${grandTotal.toFixed(2)}</strong></p>
      `;

      document.querySelector(".amount-in-words").innerText = `Total in Words: ${convertNumberToWords(Math.round(grandTotal))} Only`;
    }

    function convertNumberToWords(amount) {
      const a = [
        '', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten',
        'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'
      ];
      const b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];

      if ((amount = amount.toString()).length > 9) return 'Overflow';
      let n = ('000000000' + amount).substr(-9).match(/.{1,2}/g);
      let str = '';
      if (n[0] != 0) {
        str += (a[Number(n[0])] || b[n[0][0]] + ' ' + a[n[0][1]]) + ' Crore ';
      }
      if (n[1] != 0) {
        str += (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + ' Lakh ';
      }
      if (n[2] != 0) {
        str += (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + ' Thousand ';
      }
      if (n[3] != 0) {
        str += (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + ' Hundred ';
      }
      if (n[4] != 0) {
        str += (str != '' ? 'and ' : '') + (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + '';
      }
      return 'Indian Rupee ' + str.trim();
    }

    function downloadPDF() {
      const element = document.getElementById("invoice");
      html2pdf().set({
        margin: 10,
        filename: 'invoice.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      }).from(element).save();
    }
  </script>
</body>
</html>
